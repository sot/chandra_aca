
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>chandra_aca.transform &#8212; chandra_aca 4.44.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-astropy.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="chandra_aca.star_probs" href="star_probs.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="index.html"><span id="logotext1">Ska! </span><span id="logotext2">chandra_aca</span><span id="logotext3"></span></a>
  <ul>
    
    <li><a class="home" title="Homepage" href="https://cxc.cfa.harvard.edu/mta/ASPECT/tool_doc">
        <span id="logotext1">ska</span><span id="logotext2">tools</span>
    </a></li>
    <li><a title="General Index" href="genindex.html">Index</a></li>
    <li><a title="Module Index" href="py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="star_probs.html" title="chandra_aca.star_probs">
	  &laquo; previous
	</a>
	
      </li>
      <li>
	<a href="index.html">chandra_aca 4.44.0 documentation</a>
	 &#187;
      </li>
      
      <li>chandra_aca.transform</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-chandra_aca.transform">
<span id="chandra-aca-transform"></span><h1>chandra_aca.transform<a class="headerlink" href="#module-chandra_aca.transform" title="Permalink to this heading">¶</a></h1>
<p>The transform modules includes:</p>
<ul class="simple">
<li><p>Coordinate conversions between ACA Pixels and ACA Y-angle, Z-angle</p></li>
<li><p>Mag to count conversions</p></li>
<li><p>Science target coordinate to ACA frame conversions</p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.broadcast_arrays">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">broadcast_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#broadcast_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.broadcast_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Broadcast <code class="docutils literal notranslate"><span class="pre">*args</span></code> inputs to same shape and return an <code class="docutils literal notranslate"><span class="pre">is_scalar</span></code> flag and
the broadcasted version of inputs.  This lets intermediate code work on
arrays that are guaranteed to be the same shape and at least a 1-d array,
but reshape the output at the end.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – tuple of scalar / array inputs</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[is_scalar, *flat_args]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.broadcast_arrays_flatten">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">broadcast_arrays_flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#broadcast_arrays_flatten"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.broadcast_arrays_flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Broadcast <code class="docutils literal notranslate"><span class="pre">*args</span></code> inputs to same shape and then return that shape and the
flattened view of all the inputs.  This lets intermediate code work on all
scalars or all arrays that are the same-length 1-d array and then reshape
the output at the end (if necessary).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – tuple of scalar / array inputs</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[shape, *flat_args]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.calc_aca_from_targ">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">calc_aca_from_targ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_off</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_off</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">si_align</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#calc_aca_from_targ"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.calc_aca_from_targ" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the PCAD (ACA) pointing attitude from target attitude and
Y,Z offset (per OR-list).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>targ</strong></dt><dd><p>science target from OR/Obscat (Quat-compliant object)</p>
</dd>
<dt><strong>y_off</strong></dt><dd><p>Y offset (deg, sign per OR-list convention)</p>
</dd>
<dt><strong>z_off</strong></dt><dd><p>Z offset (deg, sign per OR-list convention)</p>
</dd>
<dt><strong>si_align</strong></dt><dd><p>SI ALIGN matrix (default=ODB_SI_ALIGN)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>q_aca (Quat)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.calc_targ_from_aca">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">calc_targ_from_aca</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aca</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_off</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_off</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">si_align</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#calc_targ_from_aca"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.calc_targ_from_aca" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the target attitude from ACA (PCAD) pointing attitude and
Y,Z offset (per OR-list).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>aca</strong></dt><dd><p>ACA (PCAD) pointing attitude (any Quat-compliant object)</p>
</dd>
<dt><strong>y_off</strong></dt><dd><p>Y offset (deg, sign per OR-list convention)</p>
</dd>
<dt><strong>z_off</strong></dt><dd><p>Z offset (deg, sign per OR-list convention)</p>
</dd>
<dt><strong>si_align</strong></dt><dd><p>SI ALIGN matrix</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>q_targ (Quat)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.calc_target_offsets">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">calc_target_offsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aca</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra_targ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_targ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">si_align</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#calc_target_offsets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.calc_target_offsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates required Y and Z offsets (deg) required from a target RA, Dec to
arrive at the desired PCAD pointing <code class="docutils literal notranslate"><span class="pre">aca</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>aca</strong></dt><dd><p>PCAD attitude (any Quat-compliant initializer)</p>
</dd>
<dt><strong>ra_targ</strong></dt><dd><p>RA of science target from OR/Obscat</p>
</dd>
<dt><strong>dec_targ</strong></dt><dd><p>Dec of science target from OR/Obscat</p>
</dd>
<dt><strong>si_align</strong></dt><dd><p>SI ALIGN matrix (default=ODB)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>tuple (y_off, z_off) degrees</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.count_rate_to_mag">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">count_rate_to_mag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count_rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#count_rate_to_mag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.count_rate_to_mag" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert count rate in e- / sec to ACA mag</p>
<p>Based on $CALDB/data/chandra/pcad/ccd_char/acapD1998-12-14ccdN0002.fits
columns mag0=10.32 and cnt_rate_mag0=5263.0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>count_rate</strong></dt><dd><p>count rate (e-/sec)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>magnitude (ACA mag)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.eci_to_radec">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">eci_to_radec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eci</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#eci_to_radec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.eci_to_radec" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert from ECI vector(s) to RA, Dec.  The input <code class="docutils literal notranslate"><span class="pre">eci</span></code> value
can be an array of 3-vectors having shape (N, 3) in which case
the output RA, Dec will be arrays of shape N. The N dimension can
actually be any multidimensional shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>eci</strong></dt><dd><p>ECI as 3-vector or (N, 3) array</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>scalar or array ra, dec (degrees)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.mag_to_count_rate">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">mag_to_count_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#mag_to_count_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.mag_to_count_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert ACA mag to count rate in e- / sec</p>
<p>Based on $CALDB/data/chandra/pcad/ccd_char/acapD1998-12-14ccdN0002.fits
columns mag0=10.32 and cnt_rate_mag0=5263.0.  To convert to raw telemetered
counts (ADU), divide e- by the gain of 5.0 e-/ADU.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>mag</strong></dt><dd><p>star magnitude in ACA mag</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>count rate (e-/sec)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.normalize_vector">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">normalize_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ord</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#normalize_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.normalize_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize <code class="docutils literal notranslate"><span class="pre">vec</span></code> over the last dimension.</p>
<p>For an L x M x N input array, this normalizes over the N dimension
using <code class="docutils literal notranslate"><span class="pre">np.linalg.norm</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>vec</strong></dt><dd><p>input vector or array of vectors</p>
</dd>
<dt><strong>ord</strong></dt><dd><p>ord parameter for np.linalg.norm (default=None =&gt; 2-norm)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>normed array of vectors</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.pixels_to_yagzag">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">pixels_to_yagzag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_bad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_aca</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pix_zero_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'edge'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#pixels_to_yagzag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.pixels_to_yagzag" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert ACA row/column positions to ACA y-angle, z-angle.
It is expected that the row and column input arguments have the same length.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pix_zero_loc</span></code> parameter controls whether the input pixel values
are assumed to have integral values at the pixel center or at the pixel
lower/left edge.  The PEA flight coefficients assume lower/left edge, and
that is the default.  However, it is generally more convenient when doing
centroids and other manipulations to use the center.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>row</strong></dt><dd><p>ACA pixel row (single value, list, or 1-d numpy array)</p>
</dd>
<dt><strong>col</strong></dt><dd><p>ACA pixel column (single value, list, or 1-d numpy array)</p>
</dd>
<dt><strong>allow_bad</strong><span class="classifier">boolean switch.  If true, method will not throw errors</span></dt><dd><p>if the row/col values are nominally off the ACA CCD.</p>
</dd>
<dt><strong>flight</strong></dt><dd><p>Use flight EEPROM coefficients instead of default ground values.</p>
</dd>
<dt><strong>t_aca</strong></dt><dd><p>ACA temperature (degC) for use with flight (default=20C)</p>
</dd>
<dt><strong>pix_zero_loc</strong></dt><dd><p>row/col coords are integral at ‘edge’ or ‘center’</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>(yang, zang) each vector of the same length as row/col</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.radec_to_eci">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">radec_to_eci</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#radec_to_eci"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.radec_to_eci" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert from RA,Dec to ECI.  The input <code class="docutils literal notranslate"><span class="pre">ra</span></code> and <code class="docutils literal notranslate"><span class="pre">dec</span></code> values can be 1-d
arrays of length N in which case the output <code class="docutils literal notranslate"><span class="pre">ECI</span></code> will be an array with
shape (N, 3). The N dimension can actually be any multidimensional shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ra</strong></dt><dd><p>Right Ascension (degrees)</p>
</dd>
<dt><strong>dec</strong></dt><dd><p>Declination (degrees)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>numpy array ECI (3-vector or N x 3 array)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.radec_to_yagzag">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">radec_to_yagzag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_att</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#radec_to_yagzag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.radec_to_yagzag" title="Permalink to this definition">¶</a></dt>
<dd><p>Given RA, Dec, and pointing quaternion, determine ACA Y-ang, Z-ang.  The
input <code class="docutils literal notranslate"><span class="pre">ra</span></code> and <code class="docutils literal notranslate"><span class="pre">dec</span></code> values can be 1-d arrays in which case the output
<code class="docutils literal notranslate"><span class="pre">yag</span></code> and <code class="docutils literal notranslate"><span class="pre">zag</span></code> will be corresponding arrays of the same length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ra</strong></dt><dd><p>Right Ascension (degrees)</p>
</dd>
<dt><strong>dec</strong></dt><dd><p>Declination (degrees)</p>
</dd>
<dt><strong>q_att</strong></dt><dd><p>ACA pointing quaternion (Quat or Quat-compatible input)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>yag, zag (arcsec)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.snr_mag_for_t_ccd">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">snr_mag_for_t_ccd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t_ccd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_mag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_t_ccd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_4c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#snr_mag_for_t_ccd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.snr_mag_for_t_ccd" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a t_ccd, solve for the magnitude that has the same expected signal
to noise as ref_mag / ref_t_ccd.</p>
<p>If scale_4c is None, the value from dark_model.DARK_SCALE_4C is used.</p>
<p>To solve for the magnitude that has the expected signal to noise as
ref_mag / ref_t_ccd, we use the following derivation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counts</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span> <span class="o">/</span> <span class="n">noise</span><span class="p">(</span><span class="n">t_ccd</span><span class="p">)</span> <span class="o">=</span> <span class="n">counts</span><span class="p">(</span><span class="n">ref_mag</span><span class="p">)</span> <span class="o">/</span> <span class="n">noise</span><span class="p">(</span><span class="n">ref_t_ccd</span><span class="p">)</span>
<span class="n">noise</span><span class="p">(</span><span class="n">t_ccd</span><span class="p">)</span> <span class="o">=</span> <span class="n">noise</span><span class="p">(</span><span class="n">ref_t_ccd</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale</span>
<span class="n">scale</span> <span class="o">=</span> <span class="n">scale_4c</span> <span class="o">**</span> <span class="p">((</span><span class="n">t_ccd</span> <span class="o">-</span> <span class="n">ref_t_ccd</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the definition of counts as a function of magnitude, substituting in,
reducing, and solving the original equality for mag gives:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counts</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span> <span class="o">=</span> <span class="n">ACA_CNT_RATE_MAG0</span> <span class="o">*</span> <span class="mf">10.0</span> <span class="o">**</span> <span class="p">((</span><span class="n">ACA_MAG0</span> <span class="o">-</span> <span class="n">mag</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.5</span><span class="p">)</span>
<span class="n">ref_mag</span> <span class="o">=</span> <span class="p">(</span><span class="n">t_ccd</span> <span class="o">-</span> <span class="n">ref_t_ccd</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">scale_4c</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1.6</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>t_ccd</strong><span class="classifier">float, array</span></dt><dd><p>CCD temperature (degC)</p>
</dd>
<dt><strong>ref_mag</strong><span class="classifier">float, array</span></dt><dd><p>Reference magnitude (mag)</p>
</dd>
<dt><strong>ref_t_ccd</strong><span class="classifier">float, array</span></dt><dd><p>Reference CCD temperature (degC)</p>
</dd>
<dt><strong>scale_4c</strong><span class="classifier">float</span></dt><dd><p>Scale factor for a 4 degC change in CCD temperature (defaults to DARK_SCALE_4C)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>float, array</dt><dd></dd>
<dt>Magnitude(s) with the same expected signal to noise as ref_mag at ref_t_ccd</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.yagzag_to_pixels">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">yagzag_to_pixels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yang</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zang</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_bad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pix_zero_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'edge'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#yagzag_to_pixels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.yagzag_to_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert ACA y-angle/z-angle positions to ACA pixel row, column.
It is expected that the y-angle/z-angle input arguments have the same length.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pix_zero_loc</span></code> parameter controls whether the input pixel values
are assumed to have integral values at the pixel center or at the pixel
lower/left edge.  The PEA flight coefficients assume lower/left edge, and
that is the default.  However, it is generally more convenient when doing
centroids and other manipulations to use <code class="docutils literal notranslate"><span class="pre">pix_zero_loc='center'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>yang</strong></dt><dd><p>ACA y-angle (single value, list, or 1-d numpy array)</p>
</dd>
<dt><strong>zang</strong></dt><dd><p>ACA z-angle (single value, list, or 1-d numpy array)</p>
</dd>
<dt><strong>allow_bad</strong><span class="classifier">boolean switch.  If true, method will not throw errors</span></dt><dd><p>if the resulting row/col values are nominally off the ACA CCD.</p>
</dd>
<dt><strong>pix_zero_loc</strong></dt><dd><p>row/col coords are integral at ‘edge’ or ‘center’</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>(row, col) each vector of the same length as row/col</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="chandra_aca.transform.yagzag_to_radec">
<span class="sig-prename descclassname"><span class="pre">chandra_aca.transform.</span></span><span class="sig-name descname"><span class="pre">yagzag_to_radec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_att</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/chandra_aca/transform.html#yagzag_to_radec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#chandra_aca.transform.yagzag_to_radec" title="Permalink to this definition">¶</a></dt>
<dd><p>Given ACA Y-ang, Z-ang and pointing quaternion determine RA, Dec. The
input <code class="docutils literal notranslate"><span class="pre">yag</span></code> and <code class="docutils literal notranslate"><span class="pre">zag</span></code> values can be 1-d arrays in which case the output
<code class="docutils literal notranslate"><span class="pre">ra</span></code> and <code class="docutils literal notranslate"><span class="pre">dec</span></code> will be corresponding arrays of the same length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>yag</strong></dt><dd><p>ACA Y angle (arcsec)</p>
</dd>
<dt><strong>zag</strong></dt><dd><p>ACA Z angle (arcsec)</p>
</dd>
<dt><strong>q_att</strong></dt><dd><p>ACA pointing quaternion (Quat or Quat-compatible input)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>ra, dec (degrees)</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">chandra_aca.transform</a><ul>
<li><a class="reference internal" href="#chandra_aca.transform.broadcast_arrays"><code class="docutils literal notranslate"><span class="pre">broadcast_arrays()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.broadcast_arrays_flatten"><code class="docutils literal notranslate"><span class="pre">broadcast_arrays_flatten()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.calc_aca_from_targ"><code class="docutils literal notranslate"><span class="pre">calc_aca_from_targ()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.calc_targ_from_aca"><code class="docutils literal notranslate"><span class="pre">calc_targ_from_aca()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.calc_target_offsets"><code class="docutils literal notranslate"><span class="pre">calc_target_offsets()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.count_rate_to_mag"><code class="docutils literal notranslate"><span class="pre">count_rate_to_mag()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.eci_to_radec"><code class="docutils literal notranslate"><span class="pre">eci_to_radec()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.mag_to_count_rate"><code class="docutils literal notranslate"><span class="pre">mag_to_count_rate()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.normalize_vector"><code class="docutils literal notranslate"><span class="pre">normalize_vector()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.pixels_to_yagzag"><code class="docutils literal notranslate"><span class="pre">pixels_to_yagzag()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.radec_to_eci"><code class="docutils literal notranslate"><span class="pre">radec_to_eci()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.radec_to_yagzag"><code class="docutils literal notranslate"><span class="pre">radec_to_yagzag()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.snr_mag_for_t_ccd"><code class="docutils literal notranslate"><span class="pre">snr_mag_for_t_ccd()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.yagzag_to_pixels"><code class="docutils literal notranslate"><span class="pre">yagzag_to_pixels()</span></code></a></li>
<li><a class="reference internal" href="#chandra_aca.transform.yagzag_to_radec"><code class="docutils literal notranslate"><span class="pre">yagzag_to_radec()</span></code></a></li>
</ul>
</li>
</ul>


  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="star_probs.html"
                          title="previous chapter">chandra_aca.star_probs</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/transform.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="_sources/transform.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2015, Tom Aldcroft, Jean Connelly.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 6.1.3. &nbsp;
  </p>
</footer>
  </body>
</html>